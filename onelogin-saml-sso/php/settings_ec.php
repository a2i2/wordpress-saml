<?php

$sp_entity_id = 'urn:allplaylearn:ec:dev';
$idp_x509_cert = 'MIIFdzCCBF+gAwIBAgIQBrLwuzUKqI8tbdVCJQCM3jANBgkqhkiG9w0BAQsFADBwMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMS8wLQYDVQQDEyZEaWdpQ2VydCBTSEEyIEhpZ2ggQXNzdXJhbmNlIFNlcnZlciBDQTAeFw0xNzA3MDcwMDAwMDBaFw0yMDEwMDMxMjAwMDBaMHYxCzAJBgNVBAYTAkFVMRcwFQYDVQQHEw5FYXN0IE1lbGJvdXJuZTEtMCsGA1UEChMkRGVwYXJ0bWVudCBvZiBFZHVjYXRpb24gYW5kIFRyYWluaW5nMR8wHQYDVQQDDBYqLmVkdWNhdGlvbi52aWMuZ292LmF1MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAp1iF1ctBgPCcBkQJwF6yQGbPX5cZofAh3QUvUvYU+OrP5gRQiVhK4dEIdzvFycnaRUzCG2xTSpraassUJrk04nZVJwqQGlRM2ZO0/pGoWOGa+89BVpYVUBSjs8rsq0u9nIX79/0OxJiyGwdiX7hhxZovtT87s0qst76Twsqbg4Q35UFA85dCOJUk7ymfRnUpk8PKXnKyR3oWBSO9JU9WjPGp8YRArKLXvrDrNOnGuJ9nwI44DE/fys8FwwrD/53cEFW8HAOK4Ewrp8G+JSklspuEGkJARZMUtsJgRYIIiHMREjZ3EConjK7rqRhMnAfeobuFnXSOLqMNRt/4nOIQ5wIDAQABo4ICBTCCAgEwHwYDVR0jBBgwFoAUUWj/kK8CB3U8zNllZGKiErhZcjswHQYDVR0OBBYEFM4prCf+dQMGBddJCOAjk0ONIZOKMDcGA1UdEQQwMC6CFiouZWR1Y2F0aW9uLnZpYy5nb3YuYXWCFGVkdWNhdGlvbi52aWMuZ292LmF1MA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwdQYDVR0fBG4wbDA0oDKgMIYuaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL3NoYTItaGEtc2VydmVyLWcxLmNybDA0oDKgMIYuaHR0cDovL2NybDQuZGlnaWNlcnQuY29tL3NoYTItaGEtc2VydmVyLWcxLmNybDBMBgNVHSAERTBDMDcGCWCGSAGG/WwBATAqMCgGCCsGAQUFBwIBFhxodHRwczovL3d3dy5kaWdpY2VydC5jb20vQ1BTMAgGBmeBDAECAjCBgwYIKwYBBQUHAQEEdzB1MCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wTQYIKwYBBQUHMAKGQWh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFNIQTJIaWdoQXNzdXJhbmNlU2VydmVyQ0EuY3J0MAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQELBQADggEBADscPUdwY2Zi51vzP67zgsL1fauKJMNpUKWUBcYXH6HpGO2hhchCEBASOqN7cDWNuOSdjtcv5tWE7Nh2avDFJ4cg1QaDfsSy7kxIJbwUdCORloyY8RliHF3ddvS6Fk6EXg2ZmaAnTBVuw2FR3NdFL1Y6NGZymVD/3BSBg8YPzeYLWUnZD0ik8RHJe7F5Pi2LxguxNHcZ4q9MvzCoi83il/knb3qTSKYjgP4s8bzjKdUfe48M0+XIXCLOVr6+twhBZoc4EfvHg6jENoZvCVqFpPZvT1iTeVthpppz+CxbwWG5ccdgGxbhVkURoEKaVMHH1yk9uKDpfiiC1xCmTxJzN9A=';
$sp_x509_cert = '-----BEGIN CERTIFICATE-----
MIICrzCCAhgCCQCnWTkPE1INxTANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMC
QVUxETAPBgNVBAgMCFZpY3RvcmlhMRAwDgYDVQQHDAdCdXJ3b29kMRYwFAYDVQQK
DA1BbGxQbGF5IExlYXJuMQ4wDAYDVQQLDAVMZWFybjEWMBQGA1UEAwwNQWxsUGxh
eSBMZWFybjEnMCUGCSqGSIb3DQEJARYYZGV2ZWxvcGVyQGFsbHBsYXkub3JnLmF1
MB4XDTE5MDQwODA0MjE1MFoXDTI0MDQwNjA0MjE1MFowgZsxCzAJBgNVBAYTAkFV
MREwDwYDVQQIDAhWaWN0b3JpYTEQMA4GA1UEBwwHQnVyd29vZDEWMBQGA1UECgwN
QWxsUGxheSBMZWFybjEOMAwGA1UECwwFTGVhcm4xFjAUBgNVBAMMDUFsbFBsYXkg
TGVhcm4xJzAlBgkqhkiG9w0BCQEWGGRldmVsb3BlckBhbGxwbGF5Lm9yZy5hdTCB
nzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA0hQJBwIdl/cjqhKe36BGR0IMs6B8
SjHywfBMxSsfPSAPznQHKL2h4lFXzLgLnQ6Ba4oa//e8wGMfxLJtb20I+eYZtf9L
FyUoWDtcPCyNM/jGbW2YV2nHUG3qBbMmJGXA7Z+J9RCbciw8xZnCG+Xow5oPYGAr
xq4wq/PvptBqYNcCAwEAATANBgkqhkiG9w0BAQsFAAOBgQAmdyMneU7HxDbQv2Qy
NXz93yhPtQfYNm85uJO5ODvO9ksk+zAa2OQCkfXHbIAwq79qwm70fQF66Fg3siGp
Xc6OfzdESPqtoc6F1r1QDBJr+gOMO0anyv3WfjFxjAWUoyqR1it4pDRjQSDcim6+
b5adPRsBc0Vo6c4WnEQ86s6HJQ==
-----END CERTIFICATE-----';
$sp_private_key = '-----BEGIN RSA PRIVATE KEY-----
MIICXAIBAAKBgQDSFAkHAh2X9yOqEp7foEZHQgyzoHxKMfLB8EzFKx89IA/OdAco
vaHiUVfMuAudDoFrihr/97zAYx/Esm1vbQj55hm1/0sXJShYO1w8LI0z+MZtbZhX
acdQbeoFsyYkZcDtn4n1EJtyLDzFmcIb5ejDmg9gYCvGrjCr8++m0Gpg1wIDAQAB
AoGBAL2fwBZHXpcRSWv2qtmIPmeLwxNQxV/jfhB465L9vZDbI+li6iNoKHu0mN/9
MN5vfXqoin6KDCJMVxyhQg7WCMaGaZYwxxB3urV/hDugwHqG+fSytobOw9KYclpw
2luH887ZpUpHZ0kjJWYEcOumyiV+pH07k6b7T/Q0fXvdNNvBAkEA8PWSW8rk/x9V
I5d5F32s6LPK1FqNbtxVSac6GPt+AkN/oVjXbRcrSsAfjIL+u09MHgwBOzaXZEGu
8MoO8N9J6QJBAN8w/4CLzj1SKNYwsdHctUQWdkyLG13wHcLEFvleeZR2mOp1KY/7
7CFikxJkarwIHLBv471r/ZiGuzblnQUe3L8CQCBY90L3Y/KT5DwY85qhtnqu2EXV
ujLtxU1T88qyyGHJafLhGFp+x8MLM7ELTOMcbB2Egw3N8Fj3MGMG3Sac8zECQAeW
btk754MGLAU8Go975V2vNc5cXE3RP/HDINTRdWiqr4ApA4S1l816wG07pLVHwVHu
O9vQtApfajXvkGsAJZkCQHf3vJ7pUFOCtpHtZht9mRbkpxTFdX6bXAtDspSL1YKP
ajvq3FlG7nYRO032PxPaexj6FkhW+3dZ+kNECJjwLmA=
-----END RSA PRIVATE KEY-----';

$settings = array (

    'strict' => $opt['strict'] == 'on'? true : false,
    'debug' => $opt['debug'] == 'on'? true : false,

    'sp' => array (
        'entityId' => $sp_entity_id,
        'assertionConsumerService' => array (
            'url' => $acs_endpoint
        ),
        'singleLogoutService' => array (
            'url' => get_site_url().'/wp-login.php?saml_sls'
        ),
        'NameIDFormat' => $opt['NameIDFormat'],
        'x509cert' => $sp_x509_cert,
        'privateKey' => $sp_private_key,
    ),

    'idp' => array (
        'entityId' => get_option('onelogin_saml_idp_entityid'),
        'singleSignOnService' => array (
            'url' => get_option('onelogin_saml_idp_sso'),
        ),
        'singleLogoutService' => array (
            'url' => get_option('onelogin_saml_idp_slo'),
        ),
        'x509cert' => $idp_x509_cert,
    ),

    'security' => array (
        'signMetadata' => false,
        'nameIdEncrypted' => $opt['nameIdEncrypted'] == 'on'? true: false,
        'authnRequestsSigned' => $opt['authnRequestsSigned'] == 'on'? true: false,
        'logoutRequestSigned' => $opt['logoutRequestSigned'] == 'on'? true: false,
        'logoutResponseSigned' => $opt['logoutResponseSigned'] == 'on'? true: false,
        'wantMessagesSigned' => $opt['wantMessagesSigned'] == 'on'? true: false,
        'wantAssertionsSigned' => $opt['wantAssertionsSigned'] == 'on'? true: false,
        'wantAssertionsEncrypted' => $opt['wantAssertionsEncrypted'] == 'on'? true: false,
        'wantNameId' => false,
        'requestedAuthnContext' => $opt['requestedAuthnContext'],
        'relaxDestinationValidation' => true,
        'lowercaseUrlencoding' => get_option('
            onelogin_saml_advanced_idp_lowercase_url_encoding', false),
        'signatureAlgorithm' => get_option('onelogin_saml_advanced_signaturealgorithm', 'http://www.w3.org/2000/09/xmldsig#rsa-sha1'),
        'digestAlgorithm' => get_option('onelogin_saml_advanced_digestalgorithm', 'http://www.w3.org/2000/09/xmldsig#sha1'),
    )
);
